import { OnModuleInit } from "@nestjs/common";
import { EntityManager } from "typeorm";
import { RedisService } from "@/shared/services/redis.service";
import { UtilService } from "@/shared/services/util.service";
import { PayResponse, SysPay } from "@/modules/api/APIInterFace/interface";
import { ChannelType, HaveAmount, OrderRedis, PayAccountAndMerchant, PayAccountEx, ProcessModel, ServiceHandler } from "@/modules/api/subHandler/InerFace";
import { TopService } from "@/modules/usersys/top/top.service";
import { ProxyService } from "@/modules/usersys/proxy/proxy.service";
import { Queue } from "bull";
import { PayAccount } from "@/entities/resource/payaccount.entity";
import { TopOrder } from "@/entities/order/top.entity";
import { SysParamConfigService } from "@/modules/admin/system/param-config/param-config.service";
import { ChannelService } from "@/modules/resource/channel/channel.service";
export declare class TopOrderRedirect extends TopOrder {
    url: string;
}
export declare class ALiPayHandlerService implements ServiceHandler, OnModuleInit {
    private redisService;
    private entityManager;
    private topUserService;
    private proxyUserService;
    private orderQueue;
    private paramConfigService;
    private channelService;
    private util;
    constructor(redisService: RedisService, entityManager: EntityManager, topUserService: TopService, proxyUserService: ProxyService, orderQueue: Queue, paramConfigService: SysParamConfigService, channelService: ChannelService, util: UtilService);
    onModuleInit(): Promise<void>;
    model: ProcessModel;
    defaultSystemOutTime: number;
    host: string;
    private redlock;
    private readonly queueKey;
    private readonly lastUuidKey;
    redisOrderName: string;
    channelType: ChannelType;
    nameKey: string;
    result(params: SysPay): Promise<PayResponse>;
    haveAmount(params: SysPay): Promise<HaveAmount[]>;
    findMerchant(params: SysPay, payUserQueue: HaveAmount[], oid: string): Promise<PayAccountAndMerchant | null>;
    findOrder(params: SysPay, user: HaveAmount): Promise<any>;
    findPayAccountAndUpdate(params: SysPay, user: HaveAmount, oid: string): Promise<PayAccount | PayAccountEx>;
    getApiUrl(params: any): Promise<void>;
    createOrder(params: SysPay, account: PayAccountAndMerchant, oid: string): Promise<void>;
    rollback(params: SysPay, resource: PayAccount | null, user: HaveAmount | null, oid: string): Promise<void>;
    outTime(params: OrderRedis): Promise<void>;
    checkOrder(params: SysPay): Promise<void>;
    updateMerchant(params: SysPay, user: HaveAmount): Promise<void>;
    checkOrderApi(params: OrderRedis): Promise<boolean>;
    requestApi(uid: string, cookies: string, ctoken: string): Promise<boolean | Array<any>>;
    checkOrderBySql(orderRedis: OrderRedis): Promise<boolean>;
}
